---
id: ADR-001
title: 制定严格的CSV文件导入规范
status: Accepted
date: 2025-01-27
---

### 背景 (Context)

系统需要一种标准化的方式来导入车险业务数据。为了确保数据的一致性、完整性和系统的兼容性，必须定义一个清晰、严格的数据导入规范。不规范的数据会导致解析错误、计算不准确，甚至系统崩溃。

### 决策 (Decision)

我们决定制定一套详细的CSV文件导入规范，核心原则如下：
1.  **数据结构优先**：文件名可以灵活，但数据结构（字段名、顺序、类型）必须严格遵循规范。
2.  **字段完整性**：定义26个必需字段，所有这些字段必须存在。
3.  **数据类型一致**：相同字段在不同文件中必须保持相同的数据类型（如日期为`YYYY-MM-DD`，布尔值为`True/False`）。
4.  **编码统一**：所有文件统一使用UTF-8编码。
5.  **空值处理**：明确定义了哪些字段允许为空，以及空值的表示方式（留空或`""`）。

系统将实现一个三级错误处理机制（严重错误、警告错误、信息提示）来验证上传的文件是否符合规范。

### 后果 (Consequences)

**优点:**
*   **数据质量高**：从源头保证了进入系统的数据质量。
*   **系统稳定性强**：减少了因数据格式问题导致的后端错误。
*   **开发效率提升**：前端和后端在数据处理上有了统一的标准，减少了沟通成本和兼容性问题。
*   **用户引导清晰**：用户有明确的文档指导如何准备数据，减少了使用障碍。

**缺点:**
*   **灵活性降低**：用户必须严格按照模板准备数据，增加了数据准备的前期工作量。
*   **维护成本**：当业务需求变化导致字段变更时，需要同步更新此规范文档和系统的校验逻辑。
