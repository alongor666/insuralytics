# AI 协作导航 (CLAUDE.md)

本文档是与 AI 协作者 Claude Code 进行高效协作的核心指南，旨在通过提供高级原则、关键入口和统一的知识库链接，确保开发过程的连贯性与高质量。

## 核心原则：五条黄金法则 

1.  **优先修改，而非新建**：尽可能在现有代码和文件结构上进行迭代，避免不必要的文件增删。
2.  **小步快跑，持续验证**：每次只做一个小功能或修复，完成后立即在本地运行 `pnpm dev` 进行验证，确保每一步都稳固可靠。
3.  **文档同步，保持鲜活**：代码的任何变更，尤其是数据结构、核心逻辑或开发流程的调整，都必须同步更新到 `开发文档/` 目录下的相关文档中。
4.  **保持代码质量**：在所有修改中，保持代码的质量和可维护性。避免引入新的错误或问题。
5.  **中文沟通**：使用中文与用户沟通，且在所有文档中保持中文。代码中所有的注释等都必须使用中文。

## 最小化工作流

`阅读代码` -> `提议修改` -> `执行修改` -> `本地验证` -> `更新文档`

1.  **阅读代码**：在开始修改之前，先彻底理解代码的功能、上下文和潜在影响。
2.  **提议修改**：根据理解，提出具体的修改建议，包括代码变更、架构调整或文档更新。
3.  **执行修改**：将 AI 建议的修改直接应用到代码中，确保符合项目的编码规范和最佳实践。
4.  **本地验证**：在本地运行项目，验证修改后的功能是否按预期工作，没有引入新的错误或问题。
5.  **更新文档**：根据修改内容，同步更新 `开发文档/` 目录下的相关文档，确保文档与代码保持一致。

## 关键入口点

- **数据模型与验证规则**: 
  - `prisma/schema.prisma`: 数据库表结构的唯一真实来源。
  - `src/lib/schema/insurance.ts`: Zod 定义的数据验证 schema。
  - `开发文档/03_technical_design/data_architecture.md`: 数据架构、字段定义和CSV导入规范的详细文档。

- **核心业务逻辑**:
  - `src/app/api/kpi/route.ts`: 后端 KPI 计算的核心 API 端点。
  - `开发文档/03_technical_design/core_calculations.md`: 所有核心KPI的计算公式与业务逻辑。

- **前端页面与组件**:
  - `src/app/page.tsx`: 应用主页面，包含布局和核心组件集成。
  - `src/components/data-table.tsx`: 核心数据展示表格。

- **技术栈与环境**:
  - `开发文档/03_technical_design/tech_stack.md`: 包含项目技术选型、关键库和本地开发环境设置的完整指南。

## 文档约束

- **禁止直接修改本文件** (`AGENTS.md`, `CLAUDE.md`, `GEMINI.md`)。所有项目相关的知识、设计和流程都应归档至 `开发文档/` 目录中。这些协作导航文件只作为高级指引和链接入口。
- **将 `开发文档/` 视为活文档**，与代码和功能保持同步更新。
